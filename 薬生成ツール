<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>薬生成ツール</title>
    <style>
        body { font-family: sans-serif; padding: 20px; line-height: 1.6; background-color: #f9f9f9; }
        .container { max-width: 600px; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h2 { border-bottom: 2px solid #333; padding-bottom: 10px; margin-top: 0; }
        
        /* タブのスタイル */
        .tab-buttons { display: flex; margin-bottom: 20px; }
        .tab-button {
            flex-grow: 1;
            padding: 10px 15px;
            background-color: #e0e0e0;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 5px 5px 0 0;
            margin-right: 2px;
            transition: background-color 0.3s ease;
        }
        .tab-button:last-child { margin-right: 0; }
        .tab-button.active {
            background-color: #333;
            color: white;
            font-weight: bold;
        }
        .tab-content {
            display: none; /* デフォルトは非表示 */
            padding: 15px 0;
            border-top: 1px solid #ccc;
        }
        .tab-content.active {
            display: block; /* アクティブなタブだけ表示 */
        }

        /* 既存のフォーム要素のスタイル */
        .input-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; }
        select, input[type="number"] { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; font-size: 16px; }
        .result-area { margin-top: 20px; padding: 15px; background: #eef7ff; border-radius: 4px; }
        .material-item { display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px dashed #bcd; }
        .material-item:last-child { border-bottom: none; }
        .count { font-weight: bold; color: #d32f2f; }

        /* 新しい表のスタイル */
        .inventory-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        .inventory-table th, .inventory-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        .inventory-table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        .inventory-table td:first-child { /* 画像セル */
            width: 80px; /* 画像のサイズに合わせて調整 */
        }
        .inventory-table img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>素材管理ツール</h2>

    <div class="tab-buttons">
        <button class="tab-button active" onclick="openTab(event, 'calculator')">アイテム作成</button>
        <button class="tab-button" onclick="openTab(event, 'inventory')">各種素材</button>
    </div>

    <div id="calculator" class="tab-content active">
        <div class="input-group">
            <label for="itemSelect">作成するアイテム:</label>
            <select id="itemSelect" onchange="calculate()">
                <option value="Fire Powder">Fire Powder</option>
                <option value="Water Powder">Water Powder</option>
                <option value="Spark Powder">Spark Powder</option>
            </select>
        </div>

        <div class="input-group">
            <label for="itemAmount">作成個数:</label>
            <input type="number" id="itemAmount" value="1" min="1" oninput="calculate()">
        </div>

        <div class="result-area">
            <strong>必要素材 合計:</strong>
            <div id="results">
            </div>
        </div>
    </div>

    <div id="inventory" class="tab-content">
        <h3>各種素材</h3>
        <table class="inventory-table">
            <thead>
                <tr>
                    <th>取得場所</th>
                    <th>素材名</th>
                    <th>番地情報</th>
                    <th>備考</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td></td>
                    <td>Fire flower</td>
                    <td>〇〇〇〇番地の××</td>
                    <td>---</td>
                </tr>
                <tr>
                    <td></td>
                    <td>Water flower</td>
                    <td>〇〇〇〇番地の××</td>
                    <td>---</td>
                </tr>
                <tr>
                    <td></td>
                    <td>Spark flower</td>
                    <td>〇〇〇〇番地の××</td>
                    <td>---</td>
                </tr>
                <tr>
                    <td></td>
                    <td>Water</td>
                    <td>〇〇〇〇番地の××</td>
                    <td>---</td>
                </tr>
                <tr>
                    <td></td>
                    <td>Asid</td>
                    <td>〇〇〇〇番地の××</td>
                    <td>---</td>
                </tr>
                <tr>
                    <td></td>
                    <td>Sulfur</td>
                    <td>〇〇〇〇番地の××</td>
                    <td>---</td>
                </tr>
                <tr>
                    <td></td>
                    <td>Rowling paper</td>
                    <td>〇〇〇〇番地の××</td>
                    <td>---</td>
                </tr>
                </tbody>
        </table>
    </div>

</div>

<footer style="position: absolute; top: 4px; left: 10px; padding: 10px; font-size: 0.75rem; color: #aaa;">
    <a href="https://rapid-kz.github.io/TANUPON-s-city-Tool/#" 
       style="color: inherit; text-decoration: none; transition: color 0.2s;">
        TOPページ
    </a>
</footer>

<style>
    footer a:hover {
        color: #777 !important;
        text-decoration: underline !important;
    }
</style>

<script>
    // 表のデータを定義（「-」は含めない）
    const recipeData = {
        "Fire Powder": {
            "Fire flower": 12,
            "Water flower": 8
        },
        "Water Powder": {
            "Fire flower": 6,
            "Water flower": 6,
            "Water": 4,
            "Asid": 5
        },
        "Spark Powder": {
            "Fire flower": 11,
            "Spark flower": 11,
            "Sulfur": 4,
            "Rowling paper": 4
        }
    };

    function calculate() {
        const item = document.getElementById('itemSelect').value;
        const amount = parseInt(document.getElementById('itemAmount').value) || 0;
        const resultsDiv = document.getElementById('results');
        
        const materials = recipeData[item];
        let html = '';

        if (amount <= 0) {
            resultsDiv.innerHTML = '個数を入力してください。';
            return;
        }

        for (const [name, cost] of Object.entries(materials)) {
            const total = cost * amount;
            html += `<div class="material-item">
                        <span>${name}</span>
                        <span class="count">${total}</span>
                     </div>`;
        }

        resultsDiv.innerHTML = html;
    }

    // タブ切り替え処理
    function openTab(evt, tabName) {
        let i, tabContent, tabButtons;

        tabContent = document.getElementsByClassName("tab-content");
        for (i = 0; i < tabContent.length; i++) {
            tabContent[i].style.display = "none";
        }

        tabButtons = document.getElementsByClassName("tab-button");
        for (i = 0; i < tabButtons.length; i++) {
            tabButtons[i].className = tabButtons[i].className.replace(" active", "");
        }

        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
    }

    // 初期表示
    calculate();
    // ページロード時にデフォルトで「アイテム作成」タブを表示
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelector('.tab-buttons .tab-button').click();
    });
</script>

</body>
</html>
